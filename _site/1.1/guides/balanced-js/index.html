
<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <title>Balanced - Payments processing, escrow, and payouts in one simple API</title>
      <link rel="shortcut icon" href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAAStJREFUWIXtlT1SwzAQRp+YHMAeGsrcIGlc4yukpDHODaBLF6dzB5yAkIYyOYJSu/INUtIw9g1MgZhhZJlITogbfZ12Pu2+0c+uaJqGIXU1aHUP4AGAkR4QQlDF0Rh4BWKgBl5CWWQuiRebyROQAgEggXmelAf913WdwFYVRyVYVnGUOhRPgQe1F5Vra/K2AKo4CoCpwXtvC9DhnS42k/FRgD9Un+rNk/JwFCCURc33nel6cwAweXcmY9cJzICVApHALJSFMYFJeVLuVI6f/c/A3OQV+qsUQtjW6SXbX3AxeQAP4AFa09BWH+/XGXCrlvubu8+sT55ejUgVX2rhlQ3EuRqRadq5TMuTAQLL2L8BmAaT9bA6B8AjsP61XquYs1qP8NIavA94AA/wBRJiTbdsTuB4AAAAAElFTkSuQmCC" type="image/x-icon">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
      <link href="/static/css/styles.css" rel="stylesheet">
      <!--<link href="static/css/pygments.css" rel="stylesheet">-->
      <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
      <!--[if lt IE 9]>

     <!-- <script src="static/js/html5shiv.js"></script> -->
      <![endif]-->
  </head>

  <body data-spy="scroll" data-target=".sidebar-nav" data-offset="10">

    <header class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <div class="row">
            <div class="logo">
              <a class="brand" href="https://www.balancedpayments.com"></a>
            </div>
            <div class="span16">
              <ul class="nav nav-api-context">
                <li class="dropdown">
                  <a class="dropdown-toggle context api-context" data-toggle="dropdown" id="context-dropdown-head">
                    <div id="logo"></div>
                    Overview
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu context">
                    <li>
                      <a class="context-change" data-context="api" href="/1.1/api/">API Reference</a>
                    </li>
                    <li>
                      <a class="context-change" data-context="faq" href="https://support.balancedpayments.com/hc/en-us">FAQ</a>
                    </li>
                  </ul>
                </li>
              </ul>

              <ul class="nav nav-api-version">
                <li class="dropdown">
                  <a class="dropdown-toggle version api-version" data-toggle="dropdown" id="version-dropdown-head">v 1.1
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu version">
                    <li>
                      <a class="version-change" data-version="1.0" href="/1.0/overview/">v 1.0</a>
                    </li>
                  </ul>
                </li>
              </ul>

              <ul class="nav nav-api-clients">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle lang" id="lang-dropdown-head" data-toggle="dropdown">lang: cURL <b class="caret"></b></a>
                  <ul class="dropdown-menu lang">
                    <li><a class="lang-change" data-lang="ruby" href="#">Ruby</a></li>
                    <li><a class="lang-change" data-lang="python" href="#">Python</a></li>
                    <li><a class="lang-change" data-lang="node" href="#">Node.js</a></li>
                    <li><a class="lang-change" data-lang="php" href="#">PHP</a></li>
                    <li><a class="lang-change" data-lang="java" href="#">Java</a></li>
                    <li><a class="lang-change" data-lang="bash" href="#">cURL</a></li>
                  </ul>
                </li>
              </ul>
            </div>
            <ul class="nav nav-links pull-right">
              <li>
                <a href="/1.1/overview/#support">Help</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <div class="api-version-rev">
      
      <div class="container content" id="overview-content">
        <div class="row">

          <div id="sidebar-top" style="display:none">
            <div id="sidebar-top-content">
              <ul class="inline">
                <li style="vertical-align: middle;">
                  <div id="logo" style="background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAMAAAC+oj0CAAAAV1BMVEVymix4oi/vQDXjPDJ4oi94oi/vQDXvQDXvQDXvQDV4oi91ni7vQDXqPjN4oi/foRLanRHopxNznC3mPTPopxPopxMAAABwmCzgPDHanRHopxN4oi/vQDXwPhJhAAAAF3RSTlPbICDbYBBQYEAQgLOAs1DH7hDHx6CAAHwvTFAAAABmSURBVHja1cjXDYAwDABR01sCpAEh2X9ObCFkJLMA93cPSpcPtb0a92QLqDLWsdYJA8iUY7aJulkzTzdr4p55Jp1gUM61uOzWjg1sn/2Iw7IEyeHEguCVeBUciaNgT+wFG49qnrsAe+cllBc1FLYAAAAASUVORK5CYII=) no-repeat center;width: 25px;height: 25px;float: left;">
                  </div>
                </li>
                <li id="context-title" style="font-size: 16px;">Overview</li>
              </ul>
              <div class="clearfix"></div>
            </div>
          </div>

          <div class="span6 context-sidebar">
            <div class="sidebar-nav" data-spy="affix">
              <div class="row">
                <div class="span6">
                  <div class="nav nav-list context-navlist">
                    <!-- The table of contents menu -->
                    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overview/#feature-requests">Feature Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/#support">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/#submission-delivery-times">Submission &amp; Delivery times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/#pricing">Pricing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/#transaction-limits">Transaction Limits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/getting-started/">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overview/getting-started/#start-integrating">Start Integrating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/getting-started/#client-libraries">Client Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/getting-started/#third-party-plugins">Third-Party Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/getting-started/#integration-assistance">Integration Assistance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/best-practices/">Best Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overview/best-practices/#use-balanced-js">Use balanced.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/best-practices/#reducing-declined-transactions">Reducing Declined Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/best-practices/#catching-fraud-early">Catching Fraud Early</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/best-practices/#reducing-payout-delays">Reducing Payout Delays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/best-practices/#use-meta">Use Meta</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/resources/">Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#test-credit-card-numbers">Test credit card numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#test-bank-account-numbers">Test bank account numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#testing-customer-identity-verification">Testing Customer identity verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#funding-instrument-fingerprint">Funding Instrument Fingerprint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#address-verification-service">Address Verification Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#card-verification-value">Card Verification Value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/resources/#changelog">1.1 Changelog</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quickstart/">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../escrow/">Understanding Escrow</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Using balanced.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debits/">Working with Debits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../credits/">Working with Credits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cardholds/">Working with Card Holds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orders/">Orders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collecting-fees/">Collecting Fees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../taxes/">Handling Taxes</a></li>
</ul>
</li>
</ul>

                    
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="context-content" class="span19 offset1">
            
  <section id="using-balanced-js">
<h1>Using balanced.js<a class="headerlink" href="#using-balanced-js" title="Permalink to this headline">∵</a></h1>
<p>Using <span class="docutils literal"><code>balanced.js</code></span> is essential in ensuring that you're PCI compliant.
When using balanced.js, sensitive data never touches your servers. As a result,
the burden of PCI compliance shifts to Balanced,
which is <a class="reference external" href="http://www.visa.com/splisting/searchGrsp.do?companyNameCriteria=Balanced">PCI-DSS Level 1 Compliant</a>.</p>
<div class="alert alert-tab admonition note">
note</div>
<div class="alert alert-green">
Throughout this guide we'll be referencing this <a class="reference external" href="http://jsfiddle.net/balanced/an5Cz/">jsFiddle example</a>.
For the sake of brevity, we'll also use <a class="reference external" href="http://www.jquery.com">jQuery</a>, but note that balanced.js
itself doesn't rely on any Javascript framework.</div>
<section id="migrating-from-v1-0">
<h2>Migrating from v1.0<a class="headerlink" href="#migrating-from-v1-0" title="Permalink to this headline">∵</a></h2>
<p>A few notable changes have occurred between v1.0 and v1.1 in terms of operation.</p>
<ul class="list-noindent simple">
<li>- Credit cards and bank accounts (funding instruments) are now tokenized at the root level
(<span class="docutils literal"><code>/cards</code></span> and <span class="docutils literal"><code>/bank_accounts</code></span>) and no longer under marketplaces. As such, tokenizations
will no longer appear in Dashboard logs.</li>
<li>- balanced.js no longer requires an init with the marketplace URI.</li>
<li>- Tokenized funding instruments are &quot;claimed&quot; by executing an authenticated request on them
such as associating them to a <span class="docutils literal"><code>Customer</code></span> or a simple fetch (GET).</li>
<li>- Unclaimed tokenized funding instruments are discarded after a short timeframe.</li>
</ul>
</section><section id="including-balanced-js">
<span id="balanced-js-include"></span><h2>Including balanced.js<a class="headerlink" href="#including-balanced-js" title="Permalink to this headline">∵</a></h2>
<div class="alert alert-tab-yellow admonition note">
note</div>
<div class="alert alert-yellow">
This may not work on very old browsers. For more information on how to
support older browsers, <a class="reference external" href="http://www.quirksmode.org/js/placejs.html">quirksmode</a> provides a tutorial on how to get
javascript <span class="docutils literal"><code>&lt;script&gt;</code></span> includes to play nicely.</div>
<p>Begin by including balanced.js in your application.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;https://js.balancedpayments.com/1.1/balanced.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<div class="alert alert-tab-red admonition note">
note</div>
<div class="alert alert-red">
Balanced recommends against locally hosting versions of balanced.js as this limits the
deliverability of important fixes.</div>
</section><section id="collecting-credit-card-information">
<span id="balanced-js-collecting-card-info"></span><h2>Collecting credit card information<a class="headerlink" href="#collecting-credit-card-information" title="Permalink to this headline">∵</a></h2>
<p>Before we can collect credit card information, we need a place where users can
enter it in, a form. The example below is extracted from this
<a class="reference external" href="http://jsfiddle.net/balanced/an5Cz/">jsFiddle example</a>.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Name on Card<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;cc-name&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;John Doe&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Card Number<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;cc-number&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;4111111111111111&quot;</span> <span class="na">maxlength=</span><span class="s">&quot;16&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Expiration<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;cc-ex-month&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;01&quot;</span> <span class="na">maxlength=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;cc-ex-year&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;2013&quot;</span> <span class="na">maxlength=</span><span class="s">&quot;4&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Security Code (CVV)<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;ex-csc&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;453&quot;</span> <span class="na">maxlength=</span><span class="s">&quot;4&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">&quot;cc-submit&quot;</span><span class="nt">&gt;</span>Tokenize<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>Now let's define our <a class="reference external" href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">callback</a>, the block of code we want to execute after
having received a response for our tokenization request to the Balanced API.
If desired, this can be the same method as the one handling bank account
creation request responses. Just add some checking to see what kind of response
was returned, e.g check for a <span class="docutils literal"><code>cards</code></span> or <span class="docutils literal"><code>bank_accounts</code></span> key.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">handleResponse</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_code</span> <span class="o">===</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fundingInstrument</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">cards</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">response</span><span class="p">.</span><span class="nx">cards</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">bank_accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="c1">// Call your backend</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/path/to/your/backend&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">uri</span><span class="o">:</span> <span class="nx">fundingInstrument</span><span class="p">.</span><span class="nx">href</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Check your backend response</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Your successful logic here from backend ruby</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Your failure logic here from backend ruby</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Failed to tokenize, your error logic here</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now register a click event for the submit button. This is where we will place
our form field values into a payload object and submit it to the Balanced API.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#cc-submit&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#cc-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">number</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#cc-number&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">expiration_month</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#cc-ex-month&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">expiration_year</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#cc-ex-year&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">security_code</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ex-csc&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
  <span class="p">};</span>

  <span class="c1">// Create credit card</span>
  <span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">payload</span><span class="p">,</span> <span class="nx">handleResponse</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section><section id="collecting-bank-account-information">
<span id="balanced-js-collecting-bank-account-info"></span><h2>Collecting bank account information<a class="headerlink" href="#collecting-bank-account-information" title="Permalink to this headline">∵</a></h2>
<p>Before we can collect credit card information, we need a place where users can
enter it in, a form. The example below is extracted from this
<a class="reference external" href="http://jsfiddle.net/balanced/an5Cz/">jsFiddle example</a>.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">&quot;form&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Account Holder&#39;s Name<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;ba-name&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;John Doe&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Routing Number<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;ba-routing&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;322271627&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label&gt;</span>Account Number<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;ba-number&quot;</span> <span class="na">autocomplete=</span><span class="s">&quot;off&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;9900000000&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">&quot;ba-submit&quot;</span><span class="nt">&gt;</span>Tokenize<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>Now let's define our <a class="reference external" href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">callback</a>, the block of code we want to execute after
having received a response for our bank account creation request to the
Balanced API. If desired, this can be the same method as the one handling card
creation request responses. Just add some checking to see what kind of response
was returned, e.g check for a <span class="docutils literal"><code>cards</code></span> or <span class="docutils literal"><code>bank_accounts</code></span> key.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">handleResponse</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status_code</span> <span class="o">===</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fundingInstrument</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">cards</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">response</span><span class="p">.</span><span class="nx">cards</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">bank_accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="c1">// Call your backend</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/path/to/your/backend&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">uri</span><span class="o">:</span> <span class="nx">fundingInstrument</span><span class="p">.</span><span class="nx">href</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Check your backend response</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Your successful logic here from backend ruby</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Your failure logic here from backend ruby</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Failed to tokenize, your error logic here</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now register a click event for the submit button. This is where we will place
our form field values into a payload object and submit it to the Balanced API.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ba-submit&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ba-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">routing_number</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ba-routing&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
    <span class="nx">account_number</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#ba-number&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
  <span class="p">};</span>

  <span class="c1">// Create bank account</span>
  <span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">payload</span><span class="p">,</span> <span class="nx">handleResponse</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section><section id="handling-input-validation">
<h2>Handling Input Validation<a class="headerlink" href="#handling-input-validation" title="Permalink to this headline">∵</a></h2>
<p>When calling <span class="docutils literal"><code>balanced.card.create</code></span>, the supplied payload will be validated
before it is sent to Balanced. For more extensive information on validating
input values, read the sections below.</p>
</section><section id="checkpoint">
<h2>Checkpoint<a class="headerlink" href="#checkpoint" title="Permalink to this headline">∵</a></h2>
<p>You should understand how to do following:</p>
<ul class="simple">
<li>✓ Include balanced.js in your application</li>
<li>✓ Initialize balanced.js with a server address and revision number</li>
<li>✓ Build an input form(s) for collecting credit card and/or bank account information</li>
<li>✓ Create a response callback handler</li>
<li>✓ Register a click event for the form submit button that assembles the form values into a payload attempts to create a card.</li>
</ul>
</section><section id="method-reference-cards">
<h2>Method Reference - Cards<a class="headerlink" href="#method-reference-cards" title="Permalink to this headline">∵</a></h2>
<dl class="function">
<dt id="balanced.card.create">
<span class="descclassname">balanced.card.</span><span class="descname">create</span><big>(</big><em>cardDataObject</em>, <em>callback</em><big>)</big><a class="headerlink" href="#balanced.card.create" title="Permalink to this definition">∵</a></dt>
<dd><p>Sends the data stored in the <span class="docutils literal"><code>cardDataObject</code></span> to Balanced's servers for
tokenization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>cardDataObject.number</strong> -- <em>required</em>. The credit card number</li>
<li><strong>cardDataObject.expiration_month</strong> -- <em>required</em>. The credit card's expiration month in the format of MM</li>
<li><strong>cardDataObject.expiration_year</strong> -- <em>required</em>. The credit card's expiration year in the format of YYYY</li>
<li><strong>cardDataObject.cvv</strong> -- <em>optional</em>. The credit card's security code</li>
<li><strong>cardDataObject.name</strong> -- <em>optional</em>. The credit card holder's name</li>
<li><strong>cardDataObject.postal_code</strong> -- <em>optional</em>. The credit card's billing postal code (zip code in the USA)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>null</code></span>. Invokes the <span class="docutils literal"><code>callback</code></span> function with three parameters -
<span class="docutils literal"><code>data</code></span>, <span class="docutils literal"><code>errors</code></span> and <span class="docutils literal"><code>status</code></span>. If successful, the <span class="docutils literal"><code>data</code></span>
parameter has a resource representation which can be identified by
its <span class="docutils literal"><code>uri</code></span></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="balanced.card.isCardNumberValid">
<span class="descclassname">balanced.card.</span><span class="descname">isCardNumberValid</span><big>(</big><em>cardNumber</em><big>)</big><a class="headerlink" href="#balanced.card.isCardNumberValid" title="Permalink to this definition">∵</a></dt>
<dd><p>Validates a card number by checking if it's formatted correctly and
passes the standard <a class="reference external" href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn check</a>. All whitespace and non-numeric data is
stripped for convenience.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>cardNumber</strong> -- the card number to Luhn validate.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>true</code></span> if the card number matches <a class="reference external" href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn check</a>, <span class="docutils literal"><code>false</code></span> otherwise.</p>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCardNumberValid</span><span class="p">(</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">);</span>       <span class="c1">// true</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCardNumberValid</span><span class="p">(</span><span class="s1">&#39;4111 1111 1111 1111&#39;</span><span class="p">);</span>    <span class="c1">// true</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCardNumberValid</span><span class="p">(</span><span class="s1">&#39;4111-1111-1111-1111&#39;</span><span class="p">);</span>    <span class="c1">// true</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCardNumberValid</span><span class="p">(</span><span class="s1">&#39;42123&#39;</span><span class="p">);</span>                  <span class="c1">// false</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="balanced.card.cardType">
<span class="descclassname">balanced.card.</span><span class="descname">cardType</span><big>(</big><em>cardNumber</em><big>)</big><a class="headerlink" href="#balanced.card.cardType" title="Permalink to this definition">∵</a></dt>
<dd><p>Returns the card brand, calculated from the card number. If the card brand can
NOT be determined, it will return <span class="docutils literal"><code>null</code></span>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>cardNumber</strong> -- the card number to determine the brand for.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>Mastercard</code></span>, <span class="docutils literal"><code>American</code> <code>Express</code></span>, <span class="docutils literal"><code>VISA</code></span>, <span class="docutils literal"><code>Discover</code> <code>Card</code></span>, or <span class="docutils literal"><code>null</code></span></p>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">cardType</span><span class="p">(</span><span class="s1">&#39;5105105105105100&#39;</span><span class="p">);</span>   <span class="c1">// Mastercard</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">cardType</span><span class="p">(</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">);</span>   <span class="c1">// VISA</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">cardType</span><span class="p">(</span><span class="s1">&#39;341111111111111&#39;</span><span class="p">);</span>    <span class="c1">// American Express</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">cardType</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                     <span class="c1">// null</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="balanced.card.isCVVValid">
<span class="descclassname">balanced.card.</span><span class="descname">isCVVValid</span><big>(</big><em>cardNumber</em>, <em>cvv</em><big>)</big><a class="headerlink" href="#balanced.card.isCVVValid" title="Permalink to this definition">∵</a></dt>
<dd><p>Checks whether or not the supplied number could be a valid card security code
for the supplied card number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>cardNumber</strong> -- the card number to determine the validate the security code for.</li>
<li><strong>cvv</strong> -- the security number to validate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>true</code></span> if the csc is valid for the card number provided, <span class="docutils literal"><code>false</code></span> otherwise.</p>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCVVValid</span><span class="p">(</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">,</span> <span class="s1">&#39;999&#39;</span><span class="p">)</span>   <span class="c1">// true</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isCVVValid</span><span class="p">(</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">,</span> <span class="s1">&#39;9999&#39;</span><span class="p">)</span>  <span class="c1">// false</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="balanced.card.isExpiryValid">
<span class="descclassname">balanced.card.</span><span class="descname">isExpiryValid</span><big>(</big><em>expirationMonth</em>, <em>expirationYear</em><big>)</big><a class="headerlink" href="#balanced.card.isExpiryValid" title="Permalink to this definition">∵</a></dt>
<dd><p>Returns true if <span class="docutils literal"><code>expirationMonth</code></span> and <span class="docutils literal"><code>expirationYear</code></span> correspond to
a date in the future.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>expirationMonth</strong> -- the expiration month to validate</li>
<li><strong>expirationYear</strong> -- the expiration year to validate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>true</code></span> if the expiration date is in the future, <span class="docutils literal"><code>false</code></span> otherwise.</p>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isExpiryValid</span><span class="p">(</span><span class="s1">&#39;01&#39;</span><span class="p">,</span> <span class="s1">&#39;2020&#39;</span><span class="p">);</span>    <span class="c1">// true</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">isExpiryValid</span><span class="p">(</span><span class="s1">&#39;01&#39;</span><span class="p">,</span> <span class="s1">&#39;2010&#39;</span><span class="p">);</span>     <span class="c1">// false</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="balanced.card.validate">
<span class="descclassname">balanced.card.</span><span class="descname">validate</span><big>(</big><em>cardDataObject</em><big>)</big><a class="headerlink" href="#balanced.card.validate" title="Permalink to this definition">∵</a></dt>
<dd><p>Performs a suite of checks on the submitted credit card data and returns
a dictionary of errors. Will return an empty dictionary if there are no
errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>cardDataObject.number</strong> -- the card number to validate</li>
<li><strong>cardDataObject.cvv</strong> -- the security code to validate</li>
<li><strong>cardDataObject.expiration_month</strong> -- the expiration month to validate</li>
<li><strong>cardDataObject.expiration_year</strong> -- the expiration year to validate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>{}</code></span> if all fields are valid, else a dictionary of errors otherwise.</p>
</td>
</tr>
</tbody>
</table>
<p>Valid input example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span>
   <span class="nx">number</span><span class="o">:</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">,</span>
   <span class="nx">expiration_month</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
   <span class="nx">expiration_year</span><span class="o">:</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span>
   <span class="nx">cvv</span><span class="o">:</span><span class="mi">123</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Will return:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;cards&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;/cards/CCEfgqHgYfUYoa5CepaiBo6&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;CCEfgqHgYfUYoa5CepaiBo6&quot;</span><span class="p">,</span>
            <span class="s2">&quot;links&quot;</span><span class="o">:</span> <span class="p">{}</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;links&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;status_code&quot;</span><span class="o">:</span> <span class="mi">201</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Invalid input example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">card</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span>
   <span class="nx">number</span><span class="o">:</span><span class="s1">&#39;4111111111111111&#39;</span><span class="p">,</span>
   <span class="nx">expiration_month</span><span class="o">:</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
   <span class="nx">expiration_year</span><span class="o">:</span><span class="s1">&#39;2000&#39;</span><span class="p">,</span>
   <span class="nx">cvv</span><span class="o">:</span><span class="mi">123</span><span class="p">,</span>
   <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;John Doe&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Will return:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;errors&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid field [expiration_month,expiration_year] - \&quot;1-2000\&quot; is not a valid credit card expiration date&quot;</span><span class="p">,</span>
            <span class="s2">&quot;extras&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;expiration_month&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid field [expiration_month,expiration_year] - \&quot;1-2000\&quot; is not a valid credit card expiration date&quot;</span><span class="p">,</span>
                <span class="s2">&quot;expiration_year&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid field [expiration_month,expiration_year] - \&quot;1-2000\&quot; is not a valid credit card expiration date&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;Bad Request&quot;</span><span class="p">,</span>
            <span class="s2">&quot;category_code&quot;</span><span class="o">:</span> <span class="s2">&quot;request&quot;</span><span class="p">,</span>
            <span class="s2">&quot;additional&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;status_code&quot;</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span>
            <span class="s2">&quot;category_type&quot;</span><span class="o">:</span> <span class="s2">&quot;request&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</section><section id="method-reference-bank-accounts">
<h2>Method Reference - Bank Accounts<a class="headerlink" href="#method-reference-bank-accounts" title="Permalink to this headline">∵</a></h2>
<dl class="function">
<dt id="balanced.bankAccount.isRoutingNumberValid">
<span class="descclassname">balanced.bankAccount.</span><span class="descname">isRoutingNumberValid</span><big>(</big><em>routingNumber</em><big>)</big><a class="headerlink" href="#balanced.bankAccount.isRoutingNumberValid" title="Permalink to this definition">∵</a></dt>
<dd><p>Validates a USA based bank routing number using the <a class="reference external" href="http://en.wikipedia.org/wiki/Routing_transit_number#MICR_Routing_number_format">MICR Routing Number Format</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>routingNumber</strong> -- a 9 digit routing number, it may have a leading zero!</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>true</code></span> if the routing number check digit matches, <span class="docutils literal"><code>false</code></span> otherwise.</p>
</td>
</tr>
</tbody>
</table>
<div class="alert alert-tab-yellow admonition warning">
warning</div>
<div class="alert alert-yellow">
The success of this method does not guarantee that the
routing number is valid, only that it falls within a valid range.</div>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">isRoutingNumberValid</span><span class="p">(</span><span class="s1">&#39;321174851&#39;</span><span class="p">)</span> <span class="c1">// passes</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">isRoutingNumberValid</span><span class="p">(</span><span class="s1">&#39;021000021&#39;</span><span class="p">)</span> <span class="c1">// passes</span>
<span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">isRoutingNumberValid</span><span class="p">(</span><span class="s1">&#39;123457890&#39;</span><span class="p">)</span> <span class="c1">// fails</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="balanced.bankAccount.validate">
<span class="descclassname">balanced.bankAccount.</span><span class="descname">validate</span><big>(</big><em>bankAccountDataObject</em><big>)</big><a class="headerlink" href="#balanced.bankAccount.validate" title="Permalink to this definition">∵</a></dt>
<dd><p>Performs a suite of checks on the submitted bank account data and
returns a dictionary of errors. Will return an empty dictionary if there
are no errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>bankAccountDataObject.routing_number</strong> -- <em>required</em>. The bank routing number to validate</li>
<li><strong>bankAccountDataObject.account_number</strong> -- <em>required</em>. The account number to perform a sanity check on</li>
<li><strong>bankAccountDataObject.name</strong> -- <em>optional</em>. The name on the bank account to perform a sanity check on</li>
<li><strong>bankAccountDataObject.type</strong> -- <em>optional</em>. The name on the bank account to perform a sanity check on</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="docutils literal"><code>{}</code></span> if all fields are valid, else a dictionary of errors otherwise.</p>
</td>
</tr>
</tbody>
</table>
<div class="alert alert-tab-yellow admonition warning">
warning</div>
<div class="alert alert-yellow">
Account numbers can not be validated in real time. More on
<a class="reference internal" href="../../overview/best-practices/#best-practices-reducing-payout-delays"><em>reducing payout delays</em></a>.</div>
<p>Valid input example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span>
   <span class="nx">bank_code</span><span class="o">:</span><span class="s1">&#39;321174851&#39;</span><span class="p">,</span>
   <span class="nx">account_number</span><span class="o">:</span><span class="s1">&#39;9900000000&#39;</span><span class="p">,</span>
   <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;John Doe&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Will return:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;bank_accounts&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;/bank_accounts/BA3J3ukgOKmvVCCPl6ElwWea&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;BA3J3ukgOKmvVCCPl6ElwWea&quot;</span><span class="p">,</span>
            <span class="s2">&quot;links&quot;</span><span class="o">:</span> <span class="p">{}</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;links&quot;</span><span class="o">:</span> <span class="p">{},</span>
    <span class="s2">&quot;status_code&quot;</span><span class="o">:</span> <span class="mi">201</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Invalid input example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">balanced</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span>
   <span class="nx">bank_code</span><span class="o">:</span><span class="s1">&#39;32117485&#39;</span><span class="p">,</span>
   <span class="nx">account_number</span><span class="o">:</span><span class="s1">&#39;9900000000&#39;</span><span class="p">,</span>
   <span class="nx">name</span><span class="o">:</span><span class="s1">&#39;John Doe&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Will return:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;errors&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid field [routing_number] - \&quot;32117485\&quot; is not a valid routing number&quot;</span><span class="p">,</span>
            <span class="s2">&quot;extras&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;routing_number&quot;</span><span class="o">:</span> <span class="s2">&quot;Invalid field [routing_number] - \&quot;32117485\&quot; is not a valid routing number&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;Bad Request&quot;</span><span class="p">,</span>
            <span class="s2">&quot;category_code&quot;</span><span class="o">:</span> <span class="s2">&quot;request&quot;</span><span class="p">,</span>
            <span class="s2">&quot;additional&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;status_code&quot;</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span>
            <span class="s2">&quot;category_type&quot;</span><span class="o">:</span> <span class="s2">&quot;request&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</section></section>
</div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/compiled.js"></script>
  </body>
</html>