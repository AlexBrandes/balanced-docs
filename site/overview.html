<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Balanced - Payments processing, escrow, and payouts in one simple
        API</title>
    <link rel="shortcut icon"
          href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAAStJREFUWIXtlT1SwzAQRp+YHMAeGsrcIGlc4yukpDHODaBLF6dzB5yAkIYyOYJSu/INUtIw9g1MgZhhZJlITogbfZ12Pu2+0c+uaJqGIXU1aHUP4AGAkR4QQlDF0Rh4BWKgBl5CWWQuiRebyROQAgEggXmelAf913WdwFYVRyVYVnGUOhRPgQe1F5Vra/K2AKo4CoCpwXtvC9DhnS42k/FRgD9Un+rNk/JwFCCURc33nel6cwAweXcmY9cJzICVApHALJSFMYFJeVLuVI6f/c/A3OQV+qsUQtjW6SXbX3AxeQAP4AFa09BWH+/XGXCrlvubu8+sT55ejUgVX2rhlQ3EuRqRadq5TMuTAQLL2L8BmAaT9bA6B8AjsP61XquYs1qP8NIavA94AA/wBRJiTbdsTuB4AAAAAElFTkSuQmCC"
          type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="static/css/styles.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="static/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body data-spy="scroll" data-target=".sidebar-nav" data-offset="180">

<!--#include file="header.html" -->


<!--#include file="overview-gen.html" -->


<!--#include file="footer.html" -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script type="text/javascript" src="static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="static/js/lunr.min.js"></script>
<script type="text/javascript" src="static/js/jquery.scrollTo-min.js"></script>
<script type="text/javascript">
    index = lunr(function () {
        this.field('title', {boost: 10});
        this.field('body');
        this.ref('ref');
    });
    $(document).ready(function () {
        $("section").each(function () {
            var header = $(this).find(':header').first();
            var title = header.text();
            var link = header.find('a.headerlink').first().attr('href');
            var id = $(this).attr('id');
            var ref = id + "__" + link;
            var body = $(this).find('p').first().text();
            index.add({
                ref: ref,
                title: title,
                body: body
            });
        });
        $('#search').focus(function(){
            if ($('#search-dropdown li').length > 0){
                $('#search-dropdown').show();
            }
        });
        $('#search-dropdown').on('click', 'li', function () {
            $('.search-active').removeClass('search-active');
            var to = $(this).attr('data-scroll-to');
            var search_text = $('#search').val();
            var header = $(to).find(':header').first();
            var body = $(to).find('p').first();
            header.html(highlight_match(header.text(), search_text));
            body.html(highlight_match(body.text(), search_text));
            $.scrollTo(to, 800);
            $('#search-dropdown').hide()
        });
        $('html').click(function () {
            $('#search-dropdown').hide()
        });
        $('#search-section').click(function (event) {
            event.stopPropagation();
        });

        $('#search').keyup(function () {
            var search_text = $(this).val();
            var results = index.search(search_text);
            s_dropdown = $('#search-dropdown');
            s_dropdown.html('');
            $.each(results, function (key, value) {
                var resp_array = value['ref'].split('__');
                var ref = resp_array[0];
                var section = $('#' + ref);
                var link = resp_array[1];
                var header = highlight_match(section.find(':header').first().text(), search_text);
                var body = highlight_match(section.find('p').first().text(), search_text);

                var result_body = "<li class='result_item' data-scroll-to='" +
                        link + "'><h4>" +
                        header  + "</h4><p>" +
                        body + "</p></li>";
                s_dropdown.append(result_body);

            });
            if (results.length > 0) {
                s_dropdown.show();
            }
            else {
                s_dropdown.hide();
            }
        });

        function highlight_match(string_to_check, search_text){
                function highlight(string){
                    return "<span class='text-highlight search-active'>" + string + "</span>";
                }
                var min_len = 3
                var already_replaced = {};
                var to_match_split = search_text.split(' ');
                for(var i=0; i<to_match_split.length; i++){
                    var word_to_replace = to_match_split[i];
                    if (word_to_replace.length > min_len && !(word_to_replace in already_replaced)){
                        var regex = new RegExp( '(' + word_to_replace + ')', 'gi' );
                        string_to_check = string_to_check.replace(regex, function(match){
                                return highlight(match)
                        });
                        already_replaced[word_to_replace] = true;
                    }
                }
                return string_to_check
        }


    });


</script>
</body>
</html>
